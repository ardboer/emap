# Onboarding Tab Implementation

## Overview

Added an "Onboarding" tab to the Edit Brand modal in the web-admin interface, allowing administrators to manage onboarding content for each brand.

## Features Added

### 1. Onboarding Configuration Fields

The new tab includes the following fields:

- **Editor Quote**: A textarea for the welcome message shown on the first onboarding screen
- **Editor Image**: File upload for the editor's photo (JPG/PNG, recommended 400×400px minimum)
- **Editor Name**: Text input for the editor's name
- **Editor Job Title**: Text input for the editor's job title (e.g., "Editor-in-Chief")

### 2. File Upload Support

- Added `editorImageFile` state to track the selected editor image
- Implemented `handleEditorImageChange()` function with validation for JPG/PNG formats
- Integrated editor image upload into the form submission process
- Editor images are saved as `editor.jpg` in the brand's assets directory

### 3. State Management

- Extended the default config object to include an `onboarding` section with default values
- Added `updateOnboarding()` helper function to update onboarding fields
- Onboarding data is properly saved to the brand's `config.json` file

### 4. UI Components

- Added "Onboarding" tab button between "Fonts" and "Features" tabs
- Created comprehensive form section with:
  - Help text explaining each field's purpose
  - File upload interface with visual feedback
  - Preview of current editor image (if exists)
  - Information box explaining the onboarding feature

## Technical Details

### Modified Files

- `web-admin/src/components/BrandForm.jsx`

### Key Changes

#### State Initialization (lines 41-46)

```javascript
onboarding: {
  editorQuote: "",
  editorImage: "",
  editorName: "",
  editorJobTitle: "",
},
```

#### New State Variable (line 59)

```javascript
const [editorImageFile, setEditorImageFile] = useState(null);
```

#### Update Function (lines 153-161)

```javascript
const updateOnboarding = (field, value) => {
  setConfig((prev) => ({
    ...prev,
    onboarding: {
      ...prev.onboarding,
      [field]: value,
    },
  }));
};
```

#### File Upload Handler (lines 283-293)

```javascript
const handleEditorImageChange = (e) => {
  const file = e.target.files[0];
  if (file) {
    const validTypes = ["image/jpeg", "image/jpg", "image/png"];
    if (!validTypes.includes(file.type)) {
      toast.error("Editor image must be a JPG or PNG file");
      return;
    }
    setEditorImageFile(file);
  }
};
```

#### Upload Integration (lines 208-215)

```javascript
// Upload editor image if provided
if (editorImageFile) {
  await brandApi.uploadAsset(formData.shortcode, "editor.jpg", editorImageFile);
  toast.success("Editor image uploaded successfully");
}
```

## Usage

### For Administrators

1. Open the web-admin interface
2. Click "Edit" on any brand or create a new brand
3. Navigate to the "Onboarding" tab
4. Fill in the editor information:
   - Enter a welcoming quote for new users
   - Upload a professional photo of the editor
   - Enter the editor's name
   - Enter the editor's job title
5. Click "Update Brand" or "Create Brand" to save

### For Developers

The onboarding data is stored in each brand's `config.json` file:

```json
{
  "onboarding": {
    "editorQuote": "Welcome to the app...",
    "editorImage": "editor.jpg",
    "editorName": "John Smith",
    "editorJobTitle": "Editor-in-Chief"
  }
}
```

The editor image is stored in the brand's assets directory:

- Path: `brands/{shortcode}/editor.jpg`
- Accessed via: `brandApi.getAssetUrl(shortcode, "editor.jpg")`

## Integration with Mobile App

The mobile app's onboarding flow uses this data:

1. **WelcomeScreen Component** (`components/onboarding/WelcomeScreen.tsx`):

   - Displays the editor quote
   - Shows the editor image using the auto-generated registry
   - Displays the editor name and job title

2. **Editor Image Registry** (`brands/editorImageRegistry.ts`):
   - Auto-generated by the prebuild script
   - Maps brand shortcodes to their editor images
   - After uploading a new editor image, run the prebuild script to update the registry

## Testing Checklist

- [ ] Create a new brand and add onboarding information
- [ ] Edit an existing brand's onboarding information
- [ ] Upload an editor image (JPG format)
- [ ] Upload an editor image (PNG format)
- [ ] Verify validation rejects non-image files
- [ ] Check that the editor image preview displays correctly
- [ ] Verify all fields save correctly to config.json
- [ ] Test that the mobile app displays the onboarding information correctly
- [ ] Run prebuild script after uploading editor image
- [ ] Verify editor image appears in mobile app

## Notes

- Editor images are automatically converted to `editor.jpg` regardless of the original filename
- The prebuild script must be run after uploading a new editor image to update the mobile app's image registry
- All onboarding fields are optional - the mobile app will use default values if not provided
- The editor image should be square and at least 400×400px for best results

## Future Enhancements

Potential improvements for future iterations:

- Image cropping/resizing tool in the upload interface
- Preview of how the onboarding screen will look in the mobile app
- Support for multiple onboarding screens
- Localization support for different languages
- Analytics tracking for onboarding completion rates
